<!DOCTYPE html>
<!--
 index.html

 HTML Mail Helper main file

 Copyright © 2025, philippe@croue.com,
 all rights reserved under MIT licence.
 See LICENCE file for more informations.
-->
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="HTML Mail Helper is a tool created to help writing mails with predefined phrases." />

<script>

"use strict";

/* *********************************************************************** */
/* *********************************************************************** */
/* *********************************************************************** */

"use strict";

/**
 * property String agent
 *
 * Agent name
 */
const agent = "Philippe";

/**
 * property Object Labels
 *
 * Screen labels
 */
const labels = {
  "cu_order_num"    : "Numéro de commande",
  "cu_email"        : "E-mail du client",
  "cu_civility"     : "Civilité du client",
  "civility_mister" : "Monsieur",
  "civility_madam"  : "Madame",
  "cu_firstname"    : "Prénom du client",
  "cu_lastname"     : "Nom du client",
  "family"          : "Maison",
  "category"        : "Catégorie",
  "search"          : "Recherche par texte...",
  "reset_inputs"    : "Réinitialiser les champs de saisie",
  "phrase_up"       : "Remonter la phrase courante",
  "phrase_down"     : "Descendre la phrase courante",
  "phrase_erase"    : "Supprimer la phrase courante",
  "result_copy"     : "Copier le résultat dans le presse-papier",
  "result_erase"    : "Effacer le résultat",
};

var data = [

  {
    "family"   : "Maeva",
    "category" : "Complet",
    "title"    : "Non satisfait, retour",
    "text"     : "Je suis désolé d'apprendre que votre commande ne vous satisfait pas entièrement.\n\nVous avez la possibilité de télécharger votre étiquette de retour et retourner votre commande sous 30 jours après réception.\n\nAfin de pouvoir y procéder, rendez-vous tout en bas de notre page internet, dans la catégorie \"Besoin d'aide\", cliquez sur \"Suivre ma commande\" et remplissez les champs comme ci-dessous :\n\n - Numéro de commande : {order}\n - Adresse mail : {email}\n\nVous recevrez un mail de confirmation de remboursement une fois que votre retour sera pris en charge par notre entrepôt.\n\nVous le recevrez ensuite directement sur le compte ayant servi à l'achat dans un délai de 10 jours ouvrés, selon les délais interbancaires.\n\nJe me permets de vous rappeler que seules les pièces neuves, non portées, non salies et non lavées vous seront remboursées. Elles doivent être retournées dans leur emballage d'origine accompagnée de leur étiquette.\n\nNous vous conseillons de conserver le récépissé tamponné par La Poste pour suivre l'acheminement de votre colis.\n\nSi vous avez des difficultés à faire votre retour, n'hésitez pas à nous contacter par mail ou téléphone, nous serons ravis de vous y assister !",
  },



  {
    "family"   : "",
    "category" : "Au revoir",
    "title"    : "Belle journée",
    "text"     : "Je vous souhaite une belle journée et reste à votre disposition pour tout renseignement complémentaire.\n\n{agent} de la Maison {family}",
  },

  {
    "family"   : "",
    "category" : "Au revoir",
    "title"    : "Attente réponse",
    "text"     : "Dans l'attente de votre réponse, je reste à votre disposition pour tout renseignement complémentaire.\n\n{agent} de la Maison {family}",
  },

  {
    "family"   : "",
    "category" : "Au revoir",
    "title"    : "Remercie intérêt",
    "text"     : "Je vous remercie pour l'intérêt que vous portez à notre Maison et reste disponible pour toute précision.\n\n{agent} de la Maison {family}",
  },



  {
    "family"   : "",
    "category" : "Excuses",
    "title"    : "Excuses",
    "text"     : "Je suis encore une fois sincèrement navrée pour cet incident et souhaite vous présenter toutes nos excuses au nom de la Maison {family}\n\n{agent} de la Maison {family}",
  },
  {
    "family"   : "",
    "category" : "Excuses",
    "title"    : "Excuses et disposition",
    "text"     : "Je vous renouvelle nos excuses pour la gêne occasionnée et reste à votre disposition pour tout renseignement complémentaire.\n\n{agent} de la Maison {family}",
  },






  {
    "family"   : "Sergio",
    "category" : "Formule de politesse",
    "title"    : "Bonjour",
    "text"     : "Bonjour {firstname},\nJe suis {agent} de l'équipe Sergio,",
  },
  {
    "family"   : "Sergio",
    "category" : "Formule de politesse",
    "title"    : "Au revoir",
    "text"     : "Je vous souhaite une bonne journée, {firstname} !\n{agent} de l'équipe Sergio.",
  },
  {
    "family"   : "Sergio",
    "category" : "Commande",
    "title"    : "Accusé réception de commande",
    "text"     : "Je vous confirme la prise en charge de la commande numéro {order}.",
  },
  {
    "family"   : "Sergio",
    "category" : "Commande",
    "title"    : "Commande introuvable",
    "text"     : "Nous n'avons trouvé aucune trace de votre commande {order}.",
  },
  {
    "family"   : "Sergio",
    "category" : "Livraison",
    "title"    : "Accusé réception de livraison",
    "text"     : "La livraison de votre commande numéro {order} a bien été prise en compte par notre transporteur, elle vous sera livrée dans les meilleurs délais.",
  },
  {
    "family"   : "Sergio",
    "category" : "Livraison",
    "title"    : "Livraison introuvable",
    "text"     : "Nous n'avons trouvé aucune trace de la livraison de votre commande {order} chez notre transporteur.",
  },




  {
    "family"   : "Maeva",
    "category" : "Formule de politesse",
    "title"    : "Bonjour",
    "text"     : "Bonjour {civility} {lastname},\nJe suis {agent} de l'équipe Maeva,",
  },
  {
    "family"   : "Maeva",
    "category" : "Formule de politesse",
    "title"    : "Au revoir",
    "text"     : "Je vous souhaite une bonne journée, {civility} {lastname}.\n{agent} de l'équipe Maeva.",
  },
  {
    "family"   : "Maeva",
    "category" : "Commande",
    "title"    : "Accusé réception de commande",
    "text"     : "Je vous confirme la prise en charge de la commande numéro {order}.",
  },
  {
    "family"   : "Maeva",
    "category" : "Commande",
    "title"    : "Commande introuvable",
    "text"     : "Nous n'avons trouvé aucune trace de votre commande {order}.",
  },
  {
    "family"   : "Maeva",
    "category" : "Livraison",
    "title"    : "Accusé réception de livraison",
    "text"     : "La livraison de votre commande numéro {order} a bien été prise en compte par notre transporteur, elle vous sera livrée dans les meilleurs délais.",
  },
  {
    "family"   : "Maeva",
    "category" : "Livraison",
    "title"    : "Livraison introuvable",
    "text"     : "Nous n'avons trouvé aucune trace de la livraison de votre commande {order} chez notre transporteur.",
  },




  {
    "family"   : "Charlotte",
    "category" : "Formule de politesse",
    "title"    : "Bonjour",
    "text"     : "Bonjour {firstname},\nJe suis {agent} de l'équipe Charlotte,",
  },
  {
    "family"   : "Charlotte",
    "category" : "Formule de politesse",
    "title"    : "Au revoir",
    "text"     : "Je vous souhaite une bonne journée, {firstname} !\n{agent} de l'équipe Charlotte.",
  },
  {
    "family"   : "Charlotte",
    "category" : "Commande",
    "title"    : "Accusé réception de commande",
    "text"     : "Je vous confirme la prise en charge de la commande numéro {order}.",
  },
  {
    "family"   : "Charlotte",
    "category" : "Commande",
    "title"    : "Commande introuvable",
    "text"     : "Nous n'avons trouvé aucune trace de votre commande {order}.",
  },
  {
    "family"   : "Charlotte",
    "category" : "Livraison",
    "title"    : "Accusé réception de livraison",
    "text"     : "La livraison de votre commande numéro {order} a bien été prise en compte par notre transporteur, elle vous sera livrée dans les meilleurs délais.",
  },
  {
    "family"   : "Charlotte",
    "category" : "Livraison",
    "title"    : "Livraison introuvable",
    "text"     : "Nous n'avons trouvé aucune trace de la livraison de votre commande {order} chez notre transporteur.",
  },


  {
    "family"   : "",
    "category" : "",
    "title"    : "Test fields",
    "text"     : "Family: {family}\nCategory: {category}\nAgent: {agent}\nOrder: {order}\nCivility: {civility}\nFirst name: {firstname}\nLast name: {lastname}\nE-mail: {email}",
  },

];

/* *********************************************************************** */
/* *********************************************************************** */
/* *********************************************************************** */

/**
 * property String appName
 *
 * Application name
 */
const appName = "HtmlMailHelper";

/**
 * property String appVersion
 *
 * Application version
 */
const appVersion = "1.0";

/**
 * property String appAuthor
 *
 * Application author
 */
const appAuthor = "philippe@croue.com";

</script>
<style>

:root {

  --body-background-color: white;
  --body-color: #202020;

  --toolbar-color: #f0f0f0;
  --toolbar-background-color: black;
  --toolbar-border-color: gray;
  --toolbar-field-color: #202020;
  --toolbar-field-background-color: white;
  --toolbar-field-border: 1px solid gray;

  --item-width: 360px;
  --item-hmargin: 1rem;
  --items-animation-duration: 0.5s;

  --item-family-font: normal normal bold 1rem sans;
  --item-family-color: darkblue;
  --item-title-font: normal normal normal 1rem sans;
  --item-title-color: darkred;
  --item-text-font: normal normal normal 0.8rem sans;
  --item-text-color: var(--body-color);

  --result-color: #f0f0f0;
  --result-background-color: black;
  --result-border-color: gray;
  --result-phrase-hover-background-color: #202020;
  --result-phrase-hover-color: yellow;
}
* {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  margin: 0;
  padding: 0;
}

HTML, BODY {
  min-width: 100%;
  min-height: 100%;
  font-size: 1rem;
}
BODY {
  overflow-x: none;
  overflow-y: auto;
}
#root {
  overflow-x: hidden;
  overflow-y: auto;
  padding-top: 9rem; /* Top toolbar height */
  padding-bottom: 16rem; /* Bottom result height */
  color: var(--body-color);
  background-color: var(--body-background-color);
}

/* Toolbar */

TOOLS {
  display: inline-block;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  padding: 1rem;
  color: var(--toolbar-color);
  background-color: var(--toolbar-background-color);
  border: none;
  border-bottom: 1px solid var(--toolbar-border-color);
  box-shadow: 0 0 1rem 0.2rem var(--toolbar-border-color);
  z-index: 2000;
}
LOGO, RESET {
  display: inline-block;
  position: fixed;
  cursor: pointer;
}
LOGO {
  top: 1rem;
  left: 1rem;
  width: 1.5rem;
  height: 1.5rem;
}
RESET {
  top: 0.5rem;
  right: 0.5rem;
  color: red;
  font-size: 2rem;
  font-weight: bold;
}
TOOLS > LINE {
  display: flex;
  justify-content: space-between;
  align-items: stretch;
  margin: 0;
  padding: 0 2rem;
  width: 100%;
  height: 100%;
}
TOOLS > LINE:not(:last-child) {
  margin-bottom: 1rem;
}
TOOLS > LINE > DIV {
  flex-grow: 1;
}
TOOLS > LINE > DIV {
margin: 0.25rem;
}

TOOLS > LINE > DIV > #order,
TOOLS > LINE > DIV > #email,
TOOLS > LINE > DIV > #civility,
TOOLS > LINE > DIV > #firstname,
TOOLS > LINE > DIV > #lastname,
TOOLS > LINE > DIV > #category,
TOOLS > LINE > DIV > #family,
TOOLS > LINE > DIV > #search {
  padding: 0.25rem 0.5rem;
  width: 100%;
  height: 2rem;
  color: var(--toolbar-field-color);
  background-color: var(--toolbar-field-background-color);
  border: var(--toolbar-field-border);
  border-radius: 0.35rem;
  font-size: 1rem;
}

TOOLS > LINE > DIV > #civility option:default{
  color: red;
}

/* Category and items list */

CATEGORY {
  display: block;
  text-align: left;
}
CATEGORY > H2 {
  margin: 0 0 1rem 1rem;
}
LIST {
  display: flex;
  justify-content: center;
  align-items: center;
  align-items: stretch;
}
CONTENT {
  display: inline-block;
  flex-grow: 1;
  max-width: 100vw;
}
ITEMS {
  display: flex;
  flex-wrap: wrap;
  width: 100vw - 2rem;
  white-space: nowrap;
}


/* Item */

ITEM {
  display: inline-block;
  margin: 0 var(--item-hmargin) 1rem var(--item-hmargin);
  padding: 0.25rem 0.5rem;
  overflow: hidden;
  min-width: var(--item-width);
  width: var(--item-width);
  background-color: white;
  border-top-left-radius: 0.75rem;
  border-top-right-radius: 0.25rem;
  border-bottom-left-radius: 0.25rem;
  border-bottom-right-radius: 0.75rem;
  border: 1px solid gray;
  vertical-align: top;
  text-align: left;
  cursor: pointer;
  transition: 0.15s ease-in-out;
  box-shadow: 0.2rem 0.2rem 0.75rem gray;
  white-space: normal;
}
ITEM:HOVER {
  transform: scale(1.05);
}
ITEM > HEADER {
  display: block;
  padding: 0.25rem 0.25rem 0 0.25rem;
  font-size: 0.9rem;
}
ITEM > HEADER > FAMILY {
  display: inline;
  color: var(--item-family-color);
  font: var(--item-family-font);
}
ITEM > HEADER > TITLE {
  display: inline;
  color: var(--item-title-color);
  font: var(--item-title-font);
}

ITEM > TEXT {
  display: block;
  padding: 0.25rem 0.25rem 0.5rem 0.25rem;
  color: var(--item-text-color);
  font: var(--item-text-font);
}
RESULT {
  display: inline-block;
  position: fixed;
  overflow: hidden;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 1rem;
  color: var(--result-color);
  background-color: var(--result-background-color);
  border: none;
  border-top: 1px solid var(--result-border-color);
  box-shadow: 0 0 1rem 0.2rem var(--result-border-color);
}
RESULT CONTENT {
  display: inline-block;
  overflow-x: hidden;
  overflow-y: auto;
  width: 100%;
  height: 10rem;
  max-height: 10rem;
}
RESULT COPY, RESULT ERASE {
  display: inline-block;
  margin-top: 0.5rem;
  cursor: pointer;
  font-size: 2rem;
  font-weight: bold;
}

RESULT COPY {
  float: left;
  color: lightgreen;
}
RESULT ERASE {
  float: right;
  color: red;
}
RESULT CONTENT PHRASE {
  display: block;
  position: relative;
  padding: 0.25rem 4rem 0.25rem 0;
  font-size: 0.9rem;
}
RESULT CONTENT PHRASE:HOVER {
  background-color: var(--result-phrase-hover-background-color);
  color: var(--result-phrase-hover-color);
}

RESULT CONTENT PHRASE UP,
RESULT CONTENT PHRASE ERASE {
  display: inline;
  position: absolute;
  margin-right: 0.5rem;
  margin-top: 0.25rem;
  top: 0;
  right: 0;
  cursor: pointer;
}
RESULT CONTENT PHRASE UP {
  right: 1.5rem;
  font-size: 1rem;
}
RESULT CONTENT PHRASE ERASE {
  right: 0;
  font-size: 1.25rem;
}

</style>

<title>HTML Mail Helper</title>
</head>
<body onload="init()">
  <tools>
    <logo>
      <svg version="1.2" viewBox="0 0 16000 16000" preserveAspectRatio="xMidYMid" fill-rule="evenodd" stroke-width="28.222" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" xmlns:ooo="http://xml.openoffice.org/svg/export" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:presentation="http://sun.com/xmlns/staroffice/presentation" xmlns:smil="http://www.w3.org/2001/SMIL20/" xmlns:anim="urn:oasis:names:tc:opendocument:xmlns:animation:1.0" xmlns:svg="urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0" xml:space="preserve">
       <defs class="ClipPathGroup">
        <clipPath id="presentation_clip_path" clipPathUnits="userSpaceOnUse">
         <rect x="0" y="0" width="16000" height="16000"/>
        </clipPath>
        <clipPath id="presentation_clip_path_shrink" clipPathUnits="userSpaceOnUse">
         <rect x="16" y="16" width="15968" height="15968"/>
        </clipPath>
       </defs>
       <defs class="TextShapeIndex">
        <g ooo:slide="id1" ooo:id-list="id3 id4 id5 id6 id7"/>
       </defs>
       <defs class="EmbeddedBulletChars">
        <g id="bullet-char-template-57356" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 580,1141 L 1163,571 580,0 -4,571 580,1141 Z"/>
        </g>
        <g id="bullet-char-template-57354" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 8,1128 L 1137,1128 1137,0 8,0 8,1128 Z"/>
        </g>
        <g id="bullet-char-template-10146" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 174,0 L 602,739 174,1481 1456,739 174,0 Z M 1358,739 L 309,1346 659,739 1358,739 Z"/>
        </g>
        <g id="bullet-char-template-10132" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 2015,739 L 1276,0 717,0 1260,543 174,543 174,936 1260,936 717,1481 1274,1481 2015,739 Z"/>
        </g>
        <g id="bullet-char-template-10007" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 0,-2 C -7,14 -16,27 -25,37 L 356,567 C 262,823 215,952 215,954 215,979 228,992 255,992 264,992 276,990 289,987 310,991 331,999 354,1012 L 381,999 492,748 772,1049 836,1024 860,1049 C 881,1039 901,1025 922,1006 886,937 835,863 770,784 769,783 710,716 594,584 L 774,223 C 774,196 753,168 711,139 L 727,119 C 717,90 699,76 672,76 641,76 570,178 457,381 L 164,-76 C 142,-110 111,-127 72,-127 30,-127 9,-110 8,-76 1,-67 -2,-52 -2,-32 -2,-23 -1,-13 0,-2 Z"/>
        </g>
        <g id="bullet-char-template-10004" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 285,-33 C 182,-33 111,30 74,156 52,228 41,333 41,471 41,549 55,616 82,672 116,743 169,778 240,778 293,778 328,747 346,684 L 369,508 C 377,444 397,411 428,410 L 1163,1116 C 1174,1127 1196,1133 1229,1133 1271,1133 1292,1118 1292,1087 L 1292,965 C 1292,929 1282,901 1262,881 L 442,47 C 390,-6 338,-33 285,-33 Z"/>
        </g>
        <g id="bullet-char-template-9679" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 813,0 C 632,0 489,54 383,161 276,268 223,411 223,592 223,773 276,916 383,1023 489,1130 632,1184 813,1184 992,1184 1136,1130 1245,1023 1353,916 1407,772 1407,592 1407,412 1353,268 1245,161 1136,54 992,0 813,0 Z"/>
        </g>
        <g id="bullet-char-template-8226" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 346,457 C 273,457 209,483 155,535 101,586 74,649 74,723 74,796 101,859 155,911 209,963 273,989 346,989 419,989 480,963 531,910 582,859 608,796 608,723 608,648 583,586 532,535 482,483 420,457 346,457 Z"/>
        </g>
        <g id="bullet-char-template-8211" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M -4,459 L 1135,459 1135,606 -4,606 -4,459 Z"/>
        </g>
        <g id="bullet-char-template-61548" transform="scale(0.00048828125,-0.00048828125)">
         <path d="M 173,740 C 173,903 231,1043 346,1159 462,1274 601,1332 765,1332 928,1332 1067,1274 1183,1159 1299,1043 1357,903 1357,740 1357,577 1299,437 1183,322 1067,206 928,148 765,148 601,148 462,206 346,322 231,437 173,577 173,740 Z"/>
        </g>
       </defs>
       <g>
        <g id="id2" class="Master_Slide">
         <g id="bg-id2" class="Background"/>
         <g id="bo-id2" class="BackgroundObjects"/>
        </g>
       </g>
       <g class="SlideGroup">
        <g>
         <g id="container-id1">
          <g id="id1" class="Slide" clip-path="url(#presentation_clip_path)">
           <g class="Page">
            <g class="Group">
             <g class="com.sun.star.drawing.ClosedBezierShape">
              <g id="id3">
               <rect class="BoundingBox" stroke="none" fill="none" x="263" y="602" width="14883" height="14797"/>
               <path fill="rgb(178,178,178)" stroke="none" d="M 2464,5246 C 2386,5270 2317,5313 2263,5370 2209,5427 2171,5498 2153,5574 2136,5651 2139,5730 2163,5804 2188,5879 2231,5946 2292,5998 2351,6051 2424,6088 2502,6105 2581,6122 2663,6119 2739,6096 L 10284,3788 C 10361,3764 10430,3721 10484,3664 10539,3606 10576,3536 10594,3460 10611,3383 10608,3304 10584,3230 10559,3155 10516,3087 10455,3036 10396,2983 10323,2946 10245,2928 10166,2912 10084,2915 10008,2938 L 2464,5246 Z M 3598,7902 C 3522,7932 3457,7979 3407,8041 3358,8103 3327,8176 3315,8253 3304,8331 3314,8409 3344,8482 3374,8555 3423,8618 3487,8666 3551,8714 3626,8745 3706,8756 3785,8767 3866,8757 3941,8728 L 11276,5854 C 11351,5824 11416,5776 11466,5715 11515,5653 11547,5580 11559,5503 11570,5425 11560,5347 11530,5274 11499,5201 11450,5138 11387,5090 11323,5042 11248,5011 11168,5000 11088,4989 11008,4999 10932,5028 L 3598,7902 Z M 5156,10936 C 5084,10972 5024,11025 4981,11090 4936,11156 4911,11232 4907,11310 4903,11387 4920,11466 4957,11535 4993,11605 5048,11663 5116,11705 5183,11748 5262,11773 5342,11777 5422,11780 5502,11764 5574,11729 L 12619,8236 C 12689,8199 12751,8146 12794,8081 12838,8015 12863,7940 12868,7861 12871,7784 12854,7706 12818,7636 12781,7566 12726,7508 12658,7465 12591,7423 12513,7399 12433,7394 12352,7391 12272,7407 12201,7443 L 5156,10936 Z M 310,3916 C 24,2649 1118,2498 1740,2352 5440,1524 6578,1248 9709,696 10730,484 11273,514 11701,2076 11893,2457 13111,5361 15145,10416 12645,16742 5928,15632 4435,14600 2825,10696 2004,8558 310,3916 Z"/>
              </g>
             </g>
             <g class="com.sun.star.drawing.ClosedBezierShape">
              <g id="id4">
               <rect class="BoundingBox" stroke="none" fill="none" x="8773" y="622" width="6965" height="10365"/>
               <path fill="rgb(0,75,172)" stroke="none" d="M 8774,6851 C 10325,4046 10609,3515 11891,1169 12156,662 12466,397 13296,868 14157,1312 14273,1379 15325,1932 15732,2167 15823,2444 15658,2796 15039,4073 13499,6776 12418,8766 11264,9517 10082,10270 8897,10986 8837,9066 8837,8290 8774,6851 Z"/>
              </g>
             </g>
             <g class="com.sun.star.drawing.CustomShape">
              <g id="id5">
               <rect class="BoundingBox" stroke="none" fill="none" x="10939" y="2043" width="4206" height="2550"/>
               <path fill="rgb(204,204,204)" stroke="none" d="M 11538,2089 L 11538,2089 C 11476,2057 11405,2041 11334,2044 11263,2047 11194,2068 11133,2105 11072,2143 11022,2195 10989,2257 L 10989,2256 10989,2257 C 10955,2319 10938,2388 10940,2458 10942,2527 10962,2595 11000,2654 11037,2713 11089,2761 11152,2793 L 14545,4546 14545,4546 C 14608,4578 14678,4594 14749,4591 14821,4588 14890,4567 14951,4529 15011,4492 15061,4440 15095,4378 L 15095,4378 15095,4378 15095,4378 C 15129,4316 15146,4247 15144,4177 15142,4108 15121,4040 15084,3981 15047,3922 14994,3874 14931,3842 L 11538,2089 Z"/>
              </g>
             </g>
             <g class="com.sun.star.drawing.ClosedBezierShape">
              <g id="id6">
               <rect class="BoundingBox" stroke="none" fill="none" x="11411" y="623" width="4328" height="3331"/>
               <path fill="rgb(141,40,30)" stroke="none" d="M 11547,2093 C 11504,2071 11458,2057 11411,2050 11557,1784 11715,1494 11892,1170 12157,663 12467,398 13297,869 14158,1313 14274,1381 15326,1933 15733,2168 15824,2445 15659,2797 15509,3108 15303,3503 15063,3952 15027,3905 14981,3866 14927,3839 L 11547,2093 11547,2093 Z"/>
              </g>
             </g>
             <g class="com.sun.star.drawing.ClosedBezierShape">
              <g id="id7">
               <rect class="BoundingBox" stroke="none" fill="none" x="8775" y="6852" width="3646" height="4136"/>
               <path fill="rgb(0,0,0)" stroke="none" d="M 8775,6852 C 10173,6870 11749,7731 12419,8767 11265,9518 10083,10271 8898,10987 8838,9068 8838,8291 8775,6852 Z"/>
              </g>
             </g>
            </g>
           </g>
          </g>
         </g>
        </g>
       </g>
      </svg>
    </logo>
    <reset onclick="resetInputs()">&#10008;</reset>
    <line>
      <div>
        <input type="text" id="order" size="20" />
      </div>
      <div>
        <input type="text" id="email" size="20" />
      </div>
      <div>
        <input type="text" id="civility" list="civilities" />
        <datalist id="civilities"></datalist>
      </div>
      <div>
        <input type="text" id="firstname" size="20" />
      </div>
      <div>
        <input type="text" id="lastname" size="20" />
      </div>
    </line>
    <line>
      <div>
        <input type="text" id="family" list="families" />
        <datalist id="families"></datalist>
      </div>
      <div>
        <input type="text" id="category" list="categories" />
        <datalist id="categories"></datalist>
      </div>
      <div>
        <input type="text" id="search" />
      </div>
    </line>
  </tools>
  <div id="root"></div>
  <result>
    <content></content>
    <copy>&#128203;</copy>
    <erase>&#10008;</erase>
  </result>
<script>

/**
 * property Array of String families
 *
 * List of available families from data for <datalist>
 */
var families = [];

/**
 * property Array of String categories
 *
 * List of available categories from data for <datalist>
 */
var categories = [];

/**
 * property Integer id
 *
 * Last Identifier for result phrases
 */
var id = 0;

/**
 * function setLabels()
 *
 * Initialize screen labels from config file labels values
 */
function setLabels() {

  document.getElementById('order').placeholder = labels.cu_order_num;
  document.getElementById('email').placeholder = labels.cu_email;
  document.getElementById('civility').placeholder = labels.cu_civility;
  document.getElementById('firstname').placeholder = labels.cu_firstname;
  document.getElementById('lastname').placeholder = labels.cu_lastname;
  document.getElementById('family').placeholder = labels.family;
  document.getElementById('category').placeholder = labels.category;
  document.getElementById('search').placeholder = labels.search;

  document.querySelector('LOGO').title = appName + ' v' + appVersion + '\nBy ' + appAuthor + '\nEnjoy!';
  document.querySelector('RESET').title = labels.reset_inputs;

  document.querySelector('RESULT').querySelector('COPY').title = labels.result_copy;
  document.querySelector('RESULT').querySelector('ERASE').title = labels.result_erase;
}

/**
 * function init()
 *
 * Initialize search tools, hide animation and display data
 */
function init() {

  // Initialize global parameters
  data.map((elem) => {

    // Add current family to available years
    if(elem.family !== '' && !families.includes(elem.family)) {

      families.push(elem.family);
    }

    // Add current category to available years
    if(elem.category !== '' && !categories.includes(elem.category)) {

      categories.push(elem.category);
    }
  });

  // Initialize screen labels
  setLabels();

  // Initialize families datalist
  initSelectOptions(families, 'families');

  // Initialize categories datalist
  initSelectOptions(categories, 'categories');

  // Initialize civilities <datalist>
  initSelectOptions([labels.civility_mister, labels.civility_madam], 'civilities');

  showData();
}

/**
 * function initSelectOptions()
 *
 * Init DOM SELECT object options with listed values
 *
 * @param Array list, the values tu use to set options
 * @param String ibjectId, the DOM select or datalist object identifier
 */
function initSelectOptions(list, objectId) {

  list.sort();

  document.getElementById(objectId).innerHTML = '';

  list.map((elem) => {

    document.getElementById(objectId).innerHTML += '<option>' + elem + '</option>';
  });
}

/**
 * function showItem()
 *
 * Generate item for element
 *
 * @param Object elem, The element to display in item
 *
 * @return String, the generated item
 */
function showItem(elem) {

  let item = `
    <item>
      <header>
        <family>{family}</family>
        {sep}
        <title>{title}</title>
      </header>
      <text>{text}</text>
    </item>`;

  return item.replaceAll('{family}', elem.family)
             .replaceAll('{title}', elem.title)
             .replaceAll('{category}', elem.category)
             .replaceAll('{text}', elem.text.replaceAll('\n', '<br />'))
             .replaceAll('{sep}', (elem.family.trim() !== '' ? ' - ' : ''));
}

/**
 * function generatePhrase()
 *
 * Generate final phrase with global parameters and inputs
 *
 * @param String str, the phrase to generate
 */
function generatePhrase(str) {

  let out = `
    <phrase id="phrase{id}">
      <div id="phrase{id}control">
        <up onclick="moveUp('phrase{id}')" title="{phraseUp}">&#9650;</up>
        <erase onclick="eraseObject('phrase{id}')" title="{phraseErase}">&#10008;</erase>
      </div>
      <div id="phrase{id}text">
        <p>
          {text}
        </p>
      </div>
    </phrase>`;

  id += 1;

  str = str.replaceAll('{agent}', agent.trim())
               .replaceAll('{order}', document.getElementById('order').value.trim())
               .replaceAll('{civility}', document.getElementById('civility').value.trim())
               .replaceAll('{email}', document.getElementById('email').value.trim())
               .replaceAll('{firstname}', document.getElementById('firstname').value.trim())
               .replaceAll('{lastname}', document.getElementById('lastname').value.trim())
               .replaceAll('{family}', document.getElementById('family').value.trim())
               .replaceAll('{category}', document.getElementById('category').value.trim())
               .replaceAll('\n', '</p><p>');

  return out.replaceAll('{id}', id)
            .replaceAll('{phraseUp}', labels.phrase_up)
            .replaceAll('{phraseErase}', labels.phrase_erase)
            .replaceAll('{text}', str);
}

/**
 * function getItem()
 *
 * Get item object from child element
 *
 * @param Object elem, the element to get item parent from
 * @param String name, the element parent localName to find
 *
 * @return Object, the item object
 */
function getItem(elem, name) {

  while(elem.localName !== name) {

      elem = elem.parentElement;
  }
  return elem;
}

/**
 * function addItem()
 *
 * Add item phrase to result
 *
 * @param Object elem, the element to add
 */
function addItem(elem) {

  document.querySelector('RESULT').querySelector('CONTENT').innerHTML += generatePhrase(getItem(elem, 'item').querySelector('TEXT').innerHTML);
}

/**
 * function searchString()
 *
 * Search string in text
 *
 * @param String search, The text to search
 * @param String text, The text to search in
 *
 * @return Boolean, True if found, otherwise false
 */
function searchString(search, text) {

  search = removeDiacritics(search.toLowerCase());
  text = removeDiacritics(text.toLowerCase());

  return text.indexOf(search) >= 0;
}

/**
 * function filterData()
 *
 * Manage data filter, depending of DOM SELECT place and year selected options
 *
 * @param Array d, The objects list to filter
 *
 * @return Array, the filtered list
 */
function filterData(d) {

  let selectFamily = document.getElementById('family');
  let selectCategory  = document.getElementById('category');
  let searchText  = document.getElementById('search');

  if(selectFamily.value === '' && selectCategory.value === '' && searchText.value === '') {

    return d;
  }

  let out = [];

  d.map((elem) => {

    if(
      (selectFamily.value === '' || elem.family === '' || (selectFamily.value !== '' && elem.family.includes(selectFamily.value)))
      &&
      (selectCategory.value === '' || elem.category === '' || (selectCategory.value !== '' && elem.category == selectCategory.value))
      &&
      (searchText.value === '' || (searchText.value !== '' && (searchString(searchText.value, elem.title) || searchString(searchText.value, elem.text))))
    ) {

      out.push(elem);
    }
  });

  return out;
}

/**
 * function showData()
 *
 * Show filtered data elements as items in #root DIV
 */
function showData() {

  // Remove all events before generating display
  removeEventsListeners();

  // Get filtered data depending of place,
  // year and search text if defined
  let d = filterData(data);

  // Get categories list from data
  let outputCategories = [];

  d.map((elem) => {

    let currentCategory = elem.category;

    if(!outputCategories.includes(currentCategory)) {

      outputCategories.push(currentCategory);
      outputCategories[currentCategory] = [];
    }

    outputCategories[currentCategory].push(elem);
  });

  let out = '';
  let id = 0;

  // Output data for each category
  outputCategories.map((category) => {

    id++;

    out += '<category><h2>' + category + '</h2><list><content><items id="items' + id + '">';

    outputCategories[category].map((elem) => {

      out += showItem(elem);
    });

    out += '</items></content></list></category>';
  });

  document.getElementById('root').innerHTML = out;

  // Add events after generating display
  addEventsListeners();
}

/**
 * function resetInputs()
 *
 * Reset all INPUT fields in filters
 */
function resetInputs() {

  document.getElementById('order').value = '';
  document.getElementById('email').value = '';
  document.getElementById('civility').value = '';
  document.getElementById('firstname').value = '';
  document.getElementById('lastname').value = '';
  document.getElementById('family').value = '';
  document.getElementById('category').value = '';
  document.getElementById('search').value = '';

  showData();
}

/**
 * function invertPosition()
 *
 * Invert the position of 2 phrases
 */
function invertPosition(id1, id2) {

   document.getElementById(id1).insertAdjacentElement('afterend', document.getElementById(id2));
}

/**
 * function getPreviousId()
 *
 * Get previous phrase identifier
 *
 * @param String id, the object identifier to get previous sibling from
 *
 * @return the previous sibling object identifier or empty string if not found
 */
function getPreviousId(id) {

  try {

    return document.getElementById(id).previousElementSibling.id;

  } catch(e) {

    return '';
  }
}

/**
 * function moveUp()
 *
 * Move a phrase up in list
 *
 * @param String id, the object identifier to move up in list
*/
function moveUp(id) {

  let prevId = getPreviousId(id);

  if(prevId !== '') {

    invertPosition(id, prevId);
  }
}

/**
 * function eraseObject()
 *
 * @param String id, The phrase object identifier to erase
 *
 * Remove object from document
 */
function eraseObject(id) {

  let el = document.getElementById(id);
  el.remove();
}

/**
 * function copyResult()
 *
 * Copy result phrases to clipboard
 */
function copyResult() {

  let out = '';

  document.querySelector('RESULT').querySelector('CONTENT').querySelectorAll('PHRASE').forEach((phrase) => {

    out += phrase.querySelector('#' + phrase.id + 'text').innerText + '\n';
  });

  navigator.clipboard.writeText(out);
}

/**
 * function eraseResult()
 *
 * Erase result content
 */
function eraseResult() {

  document.querySelector('RESULT').querySelector('CONTENT').innerHTML = '';
}

/**
 * function addEventsListeners()
 *
 * Add events listeners for tools and diapos
 */
function addEventsListeners() {

  window.onresize = function(event) {

    showData();
  };

  document.querySelector('COPY').addEventListener('click', (e) => {

    e.stopPropagation();
    e.preventDefault();
    copyResult();
  });

  document.querySelector('ERASE').addEventListener('click', (e) => {

    e.stopPropagation();
    e.preventDefault();
    eraseResult();
  });

  document.getElementById('family').addEventListener('change', (e) => {

    e.stopPropagation();
    e.preventDefault();
    showData();
  });

  document.getElementById('category').addEventListener('change', (e) => {

    e.stopPropagation();
    e.preventDefault();
    showData();
  });

  document.getElementById('search').addEventListener('change', (e) => {

    e.stopPropagation();
    e.preventDefault();
    showData();
  });

  document.querySelectorAll('ITEM').forEach((item) => {

    item.addEventListener('click', (e) => {

      e.stopPropagation();
      e.preventDefault();
      addItem(e.target);
    });
  });
}

/**
 * function removeEventsListeners()
 *
 * Remove all events listeners created
 */
function removeEventsListeners() {

  cleanupElementEvents(window);

  cleanupElementEvents(document.getElementById('family'));
  cleanupElementEvents(document.getElementById('category'));
  cleanupElementEvents(document.getElementById('search'));

  document.querySelectorAll('ITEM').forEach((elem) => {

    cleanupElementEvents(elem);
  });
}

/**
 * cleanupElementEvents()
 *
 * @param Object elem, the DOM object to remove event listeners from
 *
 * From https://stackoverflow.com/a/64484951
 */
function cleanupElementEvents(elem) {

  for (let t in elem) if (t.startsWith('on') && elem[t] != null) {

    elem[t] = null;
  }

  for (let t of elem.all_handlers || []) {

    elem.removeEventListener(t.typ, t.fn, t.opt);
  }
}

/**
 * Add a hook function to intercept all calls to addEventHandler
 * and push the handler to a list that can be used for cleanup
 *
 * From https://stackoverflow.com/a/64484951
 */
if (EventTarget.prototype.original_addEventListener == null) {

  EventTarget.prototype.original_addEventListener = EventTarget.prototype.addEventListener;

  function addEventListener_hook(typ, fn, opt) {

    this.all_handlers = this.all_handlers || [];
    this.all_handlers.push({typ,fn,opt});
    this.original_addEventListener(typ, fn, opt);
  }

  EventTarget.prototype.addEventListener = addEventListener_hook;
}

/**
 * Accents/diacritics letters correspondances
 *
 * From https://stackoverflow.com/a/5912746
 */
var defaultDiacriticsRemovalMap = [

  {'base':'A', 'letters':/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},
  {'base':'AA','letters':/[\uA732]/g},
  {'base':'AE','letters':/[\u00C6\u01FC\u01E2]/g},
  {'base':'AO','letters':/[\uA734]/g},
  {'base':'AU','letters':/[\uA736]/g},
  {'base':'AV','letters':/[\uA738\uA73A]/g},
  {'base':'AY','letters':/[\uA73C]/g},
  {'base':'B', 'letters':/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},
  {'base':'C', 'letters':/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},
  {'base':'D', 'letters':/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},
  {'base':'DZ','letters':/[\u01F1\u01C4]/g},
  {'base':'Dz','letters':/[\u01F2\u01C5]/g},
  {'base':'E', 'letters':/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},
  {'base':'F', 'letters':/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},
  {'base':'G', 'letters':/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},
  {'base':'H', 'letters':/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},
  {'base':'I', 'letters':/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},
  {'base':'J', 'letters':/[\u004A\u24BF\uFF2A\u0134\u0248]/g},
  {'base':'K', 'letters':/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},
  {'base':'L', 'letters':/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},
  {'base':'LJ','letters':/[\u01C7]/g},
  {'base':'Lj','letters':/[\u01C8]/g},
  {'base':'M', 'letters':/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},
  {'base':'N', 'letters':/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},
  {'base':'NJ','letters':/[\u01CA]/g},
  {'base':'Nj','letters':/[\u01CB]/g},
  {'base':'O', 'letters':/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},
  {'base':'OI','letters':/[\u01A2]/g},
  {'base':'OO','letters':/[\uA74E]/g},
  {'base':'OU','letters':/[\u0222]/g},
  {'base':'P', 'letters':/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},
  {'base':'Q', 'letters':/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},
  {'base':'R', 'letters':/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},
  {'base':'S', 'letters':/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},
  {'base':'T', 'letters':/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},
  {'base':'TZ','letters':/[\uA728]/g},
  {'base':'U', 'letters':/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},
  {'base':'V', 'letters':/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},
  {'base':'VY','letters':/[\uA760]/g},
  {'base':'W', 'letters':/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},
  {'base':'X', 'letters':/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},
  {'base':'Y', 'letters':/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},
  {'base':'Z', 'letters':/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},
  {'base':'a', 'letters':/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},
  {'base':'aa','letters':/[\uA733]/g},
  {'base':'ae','letters':/[\u00E6\u01FD\u01E3]/g},
  {'base':'ao','letters':/[\uA735]/g},
  {'base':'au','letters':/[\uA737]/g},
  {'base':'av','letters':/[\uA739\uA73B]/g},
  {'base':'ay','letters':/[\uA73D]/g},
  {'base':'b', 'letters':/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},
  {'base':'c', 'letters':/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},
  {'base':'d', 'letters':/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},
  {'base':'dz','letters':/[\u01F3\u01C6]/g},
  {'base':'e', 'letters':/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},
  {'base':'f', 'letters':/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},
  {'base':'g', 'letters':/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},
  {'base':'h', 'letters':/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},
  {'base':'hv','letters':/[\u0195]/g},
  {'base':'i', 'letters':/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},
  {'base':'j', 'letters':/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},
  {'base':'k', 'letters':/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},
  {'base':'l', 'letters':/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},
  {'base':'lj','letters':/[\u01C9]/g},
  {'base':'m', 'letters':/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},
  {'base':'n', 'letters':/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},
  {'base':'nj','letters':/[\u01CC]/g},
  {'base':'o', 'letters':/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},
  {'base':'oi','letters':/[\u01A3]/g},
  {'base':'ou','letters':/[\u0223]/g},
  {'base':'oo','letters':/[\uA74F]/g},
  {'base':'p','letters':/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},
  {'base':'q','letters':/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},
  {'base':'r','letters':/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},
  {'base':'s','letters':/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},
  {'base':'t','letters':/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},
  {'base':'tz','letters':/[\uA729]/g},
  {'base':'u','letters':/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},
  {'base':'v','letters':/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},
  {'base':'vy','letters':/[\uA761]/g},
  {'base':'w','letters':/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},
  {'base':'x','letters':/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},
  {'base':'y','letters':/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},
  {'base':'z','letters':/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}
];

var changes;

/**
 * function removeDiacritics()
 *
 * Remove accents/diacritics in a string
 *
 * @param String str, String to clean
 *
 * From https://stackoverflow.com/a/5912746
 *
 */
function removeDiacritics(str) {

  if(!changes) {

    changes = defaultDiacriticsRemovalMap;
  }

  for(var i = 0; i < changes.length; i++) {

    str = str.replace(changes[i].letters, changes[i].base);
  }
  return str;
}

</script>
</body>
</html>
